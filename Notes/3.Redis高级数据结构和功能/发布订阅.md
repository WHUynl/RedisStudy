# 发布订阅

### 简介

1. Redis提供了基于“发布/订阅”模式的消息机制，在此模式下，**消息的发布者和订阅者不直接通信**，发布者 只是将消息发布到指定的频道上，而订阅该频道的每个客户端都可以接收到这个消息；
2.  当客户端新订阅某个频道时，**它无法接收到该频道之前的消息，因为Redis不会对发布的消息进行持久化。**

 ![](pic\3.png)

### 发布订阅的使用场景

◼ 广播系统 

​	用户订阅某项服务，当该服务的作者发布内容时，这些订阅的用户可以得到即时的消息通知；

 ◼ 消息队列 

​	可以用于多个业务/系统之间的通信，如A系统处理了某项业务，可以通过发布消息的方式通知到B系统。



### 发布订阅的命令

```bash
#发布频道
publish news:it news:music

#进入订阅后，程序将会阻塞起来，持续监听发布的消息
#订阅频道
subscribe news:it
#模式订阅，注意使用这种方法订阅，不会计入订阅的总数
psubscribe news:*

#获得所有频道,也支持模式
pubsub channels news:*

#获得频道的注册数量（注意，只计算直接订阅的数量，所以不包含模式的订阅）
pubsub numsub news:it


```

