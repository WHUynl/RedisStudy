# AOF持久化

### 简介

![](pic\5.png)

### 命令写入

![](pic\6.png)

### 文件同步

![](pic\7.png)

### AOF的优缺点

◼ 优点 

1. 与RDB持久化可能丢失大量的数据相比，AOF持久化的**安全性要高很多**； 
2. 通过使用everysec选项，用户可以将数据丢失的时间窗口限制在1秒之内； 

◼ 缺点 

1. AOF文件存储的是协议文本，它的**体积要比二进制格式的”.rdb”文件大很多**； 
2. AOF需要通过执行AOF文件中的命令来恢复数据库，其**恢复速度比RDB慢很多**； 
3. AOF在**进行重写时也需要创建子进程**，在数据库体积较大时将占用大量资源，会导致服务器的短暂阻塞